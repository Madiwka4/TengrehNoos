# TengrehNoos
## Как TengriNews, но ~~лучше~~ хуже!

### Как запустить?
Эта программа работает на ASP.NET, для запуска понадобится Docker.
```bash
git clone https://github.com/Madiwka4/TengrehNoos
cd TengrehNoos/TengrehNoos
docker compose up 
```

После чего, Docker должен автоматически распознать и запустить программу. Сайт запускается на порте 2048(http://localhost:2048), по-этому, желательно, чтобы данный порт был открыт. 

### Как использовать?
Интерфейс работает вполне просто - при первом запуске, начинается сбор данных с веб-сайта tengrinews.kz, это может занять около минуты, в зависимости от интернет-соединения. На главной странице веб-сайта отображаются последние статьи.
Для того, чтобы их прочитать, достаточно на них нажать. Сбоку есть фильтр по тэгам, а так же сортировка по дате. Сверху есть строка поиска и выбор категории. Снизу - пагинация. В меню самой страницы, также появляется меню похожих статей, которые определяются с помощью тэгов.

### Как это работает?
Всё работает на чистом ASP.NET 8 MVC. Для создания использовался готовый шаблон Web Page, но после чего весь бэкенд был прописан вручную. Для базы данных используется Postgresql, который присудствует в docker-compose.yml. 
Для сбора данных также используется ASP.NET при помощи пакета "HttpAgilityPack". Скрипт отдельно считывает последние статьи с различных категорий на сайте tengrinews.kz, и вносит их в базу данных, если их там уже нет.
Код запускается каждый час, но также сохраняет данные о последнем запуске в базе данных, где пишется общее количество собранных страниц, а так же время последнего сбора. В случае перезапуска, скрипт проверяет, если последний сбор был сделан в последние 15 минут, и, в этом случае, продолжает без сбора.

Во время сбора, программа считывает все данные, включая автора, url картинки и тэги. Правда, для считывания даты, пришлось писать отдельную функцию, ведь она дана на русском языке на самом сайте, а для эффективной сортировки по времени, нужно конвертировать в таймстэмп.

### Компромисы. Что не так? Что можно улучшить?
Вся программа работает почти полностью на бэкенде -- джаваскрипта почти нет (кроме дефолтных jquery и bootstrap). Хотелось бы использовать ajax, но это заняло бы больше усилий и времени, так что пришлось пожертвовать гладкостью использования.
На функционал это никак не влияет.

Сайт в полностью рабочем состоянии находится на https://tengrehnoos.madi-wka.xyz
